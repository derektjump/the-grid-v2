{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>{% block title %}The Grid - Internal Hub{% endblock %}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

    <!-- Suisse Intl Fonts (Google Fonts alternative - using Inter as fallback until custom fonts loaded) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- TR2N Font for logo -->
    <style>
        @font-face {
            font-family: 'TR2N';
            src: url('{% static "hub/fonts/Tr2n.ttf" %}') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
    </style>

    <!-- The Grid Custom Styles -->
    <link rel="stylesheet" href="{% static 'core/grid.css' %}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Background Grid Pattern -->
    <div class="grid-background"></div>

    <!-- Header -->
    <header class="grid-header">
        <div class="container">
            <a href="{% url 'hub:dashboard' %}" class="grid-logo">
                <span class="grid-logo-text">THE GRID</span>
                <span class="grid-logo-version">v2.0</span>
            </a>

            <!-- Navigation menu items with black background panel -->
            <div class="grid-nav-wrapper">
                <nav class="grid-nav">
                    <a href="{% url 'hub:about' %}" class="grid-nav-item">About</a>
                    <div class="dropdown">
                        <button class="dropbtn">Apps</button>
                        <div class="dropdown-content">
                            <a href="#">Customer Lifecycle</a>
                            <a href="#">Shopify Inventory</a>
                            <a href="#">Sales Analytics</a>
                            <a href="{% url 'digital_signage:overview' %}">Digital Signage</a>
                            <a href="#">Agents Platform</a>
                        </div>
                    </div>
                    <a href="#" class="grid-nav-item">Health</a>
                    <a href="#" class="grid-nav-item">Settings</a>
                </nav>
            </div>

            <!-- Auth section -->
            <div class="grid-auth-section">
                <div class="grid-user-section">
                    {% if user.is_authenticated %}
                        <!-- Authenticated user display -->
                        <div class="user-info">
                            <span class="user-name">{{ user.get_full_name|default:user.email|default:user.username }}</span>
                            <a href="{% url 'oidc_logout' %}" class="btn-sign-out">Sign Out</a>
                        </div>
                    {% else %}
                        <!-- Not authenticated - show sign in button -->
                        <a href="{% url 'oidc_authentication_init' %}" class="btn-sign-in">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 6px;">
                                <path d="M8 0C3.58 0 0 3.58 0 8C0 12.42 3.58 16 8 16C12.42 16 16 12.42 16 8C16 3.58 12.42 0 8 0ZM11.93 5.68L7.48 10.13C7.39 10.22 7.27 10.27 7.14 10.27C7.01 10.27 6.89 10.22 6.8 10.13L4.07 7.4C3.88 7.21 3.88 6.9 4.07 6.71C4.26 6.52 4.57 6.52 4.76 6.71L7.14 9.09L11.24 4.99C11.43 4.8 11.74 4.8 11.93 4.99C12.12 5.18 12.12 5.49 11.93 5.68Z" fill="#00F0FF"/>
                            </svg>
                            Sign in with Microsoft
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        {% block content %}
        <!-- Page content goes here -->
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="grid-footer">
        <div class="container">
            <p class="text-muted">System Health: All systems operational</p>
        </div>
    </footer>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    {% block extra_js %}{% endblock %}
</body>
</html>
