{# Digital Signage - Draggable Device Card #}
{# Draggable device card for group organization #}

<div class="device-card draggable-device"
     draggable="true"
     data-device-id="{{ device.id }}"
     data-group="{{ device.group.slug|default:'' }}"
     onclick="if (!window.isDragging) window.location.href='{% url 'digital_signage:device_detail' device.id %}'">
    <div class="drag-handle" title="Drag to move to another group">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <circle cx="9" cy="6" r="2"/>
            <circle cx="15" cy="6" r="2"/>
            <circle cx="9" cy="12" r="2"/>
            <circle cx="15" cy="12" r="2"/>
            <circle cx="9" cy="18" r="2"/>
            <circle cx="15" cy="18" r="2"/>
        </svg>
    </div>
    <div class="device-card-header">
        <div>
            <div class="device-name">{{ device.name|default:"Unnamed Device" }}</div>
            {% if device.location %}
                <div style="font-family: 'Suisse Intl Mono', monospace; font-size: 0.875rem; color: rgba(255,255,255,0.5);">
                    {{ device.location }}
                </div>
            {% endif %}
        </div>
        <div class="device-status-indicator {% if device.status == 'online' %}online{% elif device.status == 'recent' %}recent{% else %}offline{% endif %}"></div>
    </div>

    <div class="device-assignment">
        {% if device.assigned_playlist %}
            <strong>Playlist:</strong> {{ device.assigned_playlist.name }}
        {% elif device.assigned_screen %}
            <strong>Screen:</strong> {{ device.assigned_screen.name }}
        {% else %}
            <span style="color: rgba(255,255,255,0.4);">No content assigned</span>
        {% endif %}
    </div>

    <div class="device-last-seen">
        {% if device.status == 'online' %}
            Online now
        {% elif device.status == 'recent' %}
            Last seen {{ device.last_seen|timesince }} ago
        {% else %}
            Offline - Last seen {{ device.last_seen|timesince }} ago
        {% endif %}
    </div>
</div>
